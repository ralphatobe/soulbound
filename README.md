# Soulbound

This repo is where I'm constructing a set of calculators for Cubicle 7's Soulbound TTRPG. Currently, the repo is split into three files:
  * attacking_prob.py - This file implements a function that can be used to calculate attack success probability, expected damage, and damage distribution for any basic attack interaction (attack attribute, attack skill, combat ability, weapon damage, opponent defense, and opponent armour) as well as a number of combat-related talents. Please note that the function assume you meet all requirements for talents while performing calculations. This file is the most heavily under development. 
  * utils.py - This file implements shorter functions that are generally utilized by each other or by attacking_prob.py. While these are simpler, they can also be used directly. In particular, the extended_test function returns Test success probability, expected number of succeses, and success distribution. 

## Installation

This repo is supported on the following systems:
  * Python 3.X
  * Windows 10

Necessary Python packages (numpy, scipy, & matplotlib) can be downloaded using

`pip install -r requirements.txt`

Example code snippets can be found at the bottom of each file, or the user can run `soulbound_calculator_v_X_XXX.py`, where "X_XXX" is the current version number.

## To Do

  * Combat:
    * Multiple targets for dual wielding
  * Errata:
    * Extended tests should be modified to accomodate the Kharadron crafting process (as implemented by my group). Since a new item can be started after the current one is finished, there is nontrivial strategy involved in how the player allocates focus during the extended Test. Codifying this strategy is complex and I no longer play a Kharadron, so it's unlikely I'll work on this soon.
    * Pierce Armour may be able to pierce the doubled armour from dual wielding. I'll have to discuss with my DM to get a ruling.


## Too Done

Expansions that have been implemented. If a function is more complicated than you expected, it's because I had to accomodate one of the cases below.

  * Tests:
    * Implemented regular tests
    * Implemented extended tests
    * Expanded extended tests to accomodate Witch Brew creation, which swaps attributes and skills partway through the extended Test. Users can still use extended Test the same as before.
  * Talents:
    * Armour Piercing: Added to attacking_prob. This initial version is imperfect and does not account for successes that have been generated by foci and remaining foci.
      * Correct calculation for the Armour Piercing Talent. The original version just checked the likelihood of piercing armour given the number of successes. The final version takes into consideration the number of successes that were generated using focus (which we know the exact die value of) and the number of remaining foci (which can be used to pierce armour further). It should be noted that the foci allocation strategy implicit in this calculation is not precisely optimal, but the cases where improvements can be made are narrow. Fail case: this calculator assumes you will always try to get as many successes as possible, even though you could deal more damage by upgrading multiple 5's to 6's instead of gaining a single more success (assuming you aren't already adequately piercing your target's armour).
    * Ambidextrous: Added to attacking_prob.
    * Backstab: Added to attacking_prob.
    * Barazakdum, the Doom-Oath: Added to attacking_prob.
    * Battle Rage: Added to attacking_prob.
    * Blood Frenzy: Added to attacking_prob.
    * Crushing Blow: Added to attacking_prob.
    * Gunslinger: Added to attacking_prob.
    * Heavy Hitter: Added to attacking_prob.
    * Immense Strikes: Added to attacking_prob.
    * Immense Swing: Added to attacking_prob.
    * Martial Memories: Added to attacking_prob.
    * Mounted Combatant: Added to attacking_prob.
    * Patient Strike: Added to attacking_prob.
    * Relentless Assault: Added to attacking_prob.
    * Sever: Added to attacking_prob.
    * Sigmar's Judgement: Added to attacking_prob.
    * Star-Fated Arrow: Added to attacking_prob.
    * The Bigger They Are: Added to attacking_prob.
    * Underdog: Added to attacking_prob.
  * Weapon Traits:
    * Cleave: Added to attacking_prob.
    * Ineffective: Added to attacking_prob.
    * Penetrating: Added to attacking_prob.
    * Rend: Added to attacking_prob.
  * Miscellaneous:
    * Added Dual Wielding to attacking_prob.
    * Added Charging to attacking_prob.
  * GUI:
    * Create a mechanism to cycle through graphs (for Cleave, Sever, etc.)
    * Create a reset button for clearing data fields.
    * Create a mechanism for detecting empty required fields and giving default values.